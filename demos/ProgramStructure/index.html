<!-- TODO: Need to add way to spawn multiple piano rolls for multi params -->
<!-- TODO: Need to add way to adjust divisions on the playlist editor -->
<!-- TODO: Deleting a select option should delete the associated canvases -->
<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rectangle Drawing</title>
	<!-- Scripts and style loaded here -->
 	<!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>-->
    <script src="SliderScript.js" defer></script>
    <script src="CodedEventScript.js" defer></script>
    <script src="PointInterpScript.js" defer></script>
    <script src="GraphDiagramScript.js" defer></script>
    <script src="TrackLaneScript.js" defer></script>
    <script src="PianoRollScript.js" defer></script>
	<!-- Be sure to load the library script before the main script -->
	<!-- This ensures Tabs.js has access to all the libraries defined in the above scripts -->
    <script src="Tabs.js" defer></script>
    <link href="style.css" rel="stylesheet">
  </head>
  <body>

	<!--tab fields -->
	<div id="master-tab-container">
		<div class="tab-container" id="tab-container">
			<button class="tab-button">
				Play Track
			</button>
			<button class="tab-button">
				Play Pattern
			</button>
			<button class="tab-button">
				Pause
			</button>
			<button class="tab-button">
				Stop
			</button>
		</div>
		<div class="tab-container" id="tab-container">
			<button class="tab-button" id="playlist-editor-tab" onclick="OpenTab('PlaylistEditor','playlist-editor-tab')">
				Playlist Editor
			</button>
			<button class="tab-button" id="instrument-editor-tab" onclick="OpenTab('InstrumentEditor','instrument-editor-tab')">
				Instrument Editor
			</button>
			<button class="tab-button" id="track-editor-tab" onclick="OpenTab('TrackEditor','track-editor-tab')">
				Track Editor
			</button>
			<button class="tab-button" id="config-tab" onclick="OpenTab('Configuration','config-tab')">
				Config
			</button>
		</div>

		<!-- Playlist editor tab -->
		<div id="PlaylistEditor" class="tab" style="display:none">
			<!-- Div for track tab controls -->
			<div class="menu-control-container" id="playlist-controls">
				<!-- Selector for choosing a pattern -->
				<label class="lr-pad">Select Track:</label>
				<select class="lr-pad" id="pattern-select">
				</select> 
				<label class="lr-pad">Block Size:</label>
				<button class="lr-pad" onclick="IncrementPlaylistBlockSize()">
					+
				</button>
				<button class="lr-pad" onclick="DecrementPlaylistBlockSize()">
					-
				</button>

				<label class="lr-pad">Reset Playlist:</label>
				<!-- Button for adding a track -->
				<button class="lr-pad" onclick='document.getElementById("playlist-dialog").showModal();'>
					Reset
				</button>

				<!-- Pop up dialog for a new canvas -->
				<dialog id="playlist-dialog">
				<form method="dialog" style="display:table;">
				<div style="display:table-row;">
					<label style="display:table-cell;">Vertical Cells:</label>
					<input style="display:table-cell;"type="number" id="playlist-vertical-cells" placeholder="20"> </br>
				</div>
				<div style="display:table-row;">
					<label style="display:table-cell;">Horizontal Cells:</label>
					<input style="display:table-cell;" type="number" id="playlist-horizontal-cells" placeholder="20"> </br>
				</div>
				<button type="reset" onclick='document.getElementById("playlist-dialog").close();'>Cancel</button>
				<button type="submit" onclick="ResetPlaylist();">
					Confirm
				</button>
				</form>
				</dialog>

			</div>
			<!-- Canvas for displaying track/lanes -->
			<canvas id="trackLaneCanvas" tabindex="1">
				<p>A track/lane canvas.</p>
			</canvas>
		</div>

		<div id="TrackEditor" class="tab" style="display:none">
			<!-- Div for track tab controls -->
			<div class="menu-control-container" id="track-controls">
				<!-- Selector for choosing a pattern -->
				<label class="lr-pad">Select Track:</label>
				<select class="lr-pad" 
						id="track-canvases-select" 
						onchange="SelectDropDown('track-canvases',this.value)">
				</select> 

				<!-- Button for deleting current track -->
				<button class="lr-pad" onclick="DeleteSelectOption('track-canvases-select');DeleteSelectOption('pattern-select');">
					Delete Track
				</button>
				<!-- Button for adding a track -->
				<button class="lr-pad" onclick='document.getElementById("track-dialog").showModal();'>
					Add Track
				</button>
				<label class="lr-pad">Switch Parameter:</label>
				<!-- Button for showing next paramter -->
				<button class="lr-pad" onclick='NextParameter();'>
					+
				</button>
				<!-- Button for showing prev parameter -->
				<button class="lr-pad" onclick='PrevParameter();'>
					-
				</button>
				<!-- Display the currently parameter -->
				<label class="lr-pad" id="param-num">Current Parameter:</label>

				<!-- Pop up dialog containing track parameters -->
				<dialog id="track-dialog" onclose="CheckDialogReopen();">
				<form method="dialog" style="display:table;">
				<div style="display:table-row;">
					<label style="display:table-cell;">Track Name:</label>
					<input style="display:table-cell;"type="text submit" id="track-name" name="track-name"> </br>
				</div>
				<div style="display:table-row;">
					<label style="display:table-cell;">Parameter:</label>
					<select style="display:table-cell;" class="lr-pad" id="parameter-type-select"> 
						<option value="Pianoroll">Pianoroll</option>
						<option value="Lollipop">Lollipop</option>
						<option value="Bars">Bars</option>
						<option value="Event">Event</option>
						<!-- <option>Interpolation Graph</option> -->
					</select> 
				</div>
				<div style="display:table-row;">
					<label style="display:table-cell;">Add/Remove:</label>
					<button style="display:table-cell;" class="lr-pad" onclick='AddParameter();'> + </button>
					<button style="display:table-cell;" class="lr-pad" onclick='RemoveParameter();'> - </button>
				</div>
				<table id="param-list" style="padding-left:2em;">
					<!-- List of parameters is displayed in this table -->
				</table>
				<div style="display:table-row;">
					<label style="display:table-cell;">Vertical Cells:</label>
					<input style="display:table-cell;"type="number" id="track-vertical-cells" placeholder="20"> </br>
				</div>
				<div style="display:table-row;">
					<label style="display:table-cell;">Horizontal Cells:</label>
					<input style="display:table-cell;" type="number" id="track-horizontal-cells" placeholder="20"> </br>
				</div>
				<button id="cancel" type="reset" onclick='document.getElementById("track-dialog").close();'>Cancel</button>
				<button type="submit" onclick="AddCanvas('track-canvases','track',document.getElementById('track-name').value)">
					Confirm
				</button>
				</form>
				</dialog>
			</div>
			<!-- Canvases for track lane diagrams-->
			<!-- the tabindex value makes the canvas focusable for catching keystrokes -->
			<div id="track-canvases"></div>
		</div>

		<div id="Configuration" class="tab" style="display:none">
			Master configuration controls go here.
		</div>

		<!-- GraphDiagram tab -->
		<div id="InstrumentEditor" class="tab" style="display:block">
			<!-- Div for instrument tab controls -->
			<div class="menu-control-container" id="instrument-controls">
				<!-- Selector for choosing an instrument to edit -->
				<label class="lr-pad">Select Instrument:</label>
				<!-- Options are added dynamically here -->
				<select class="lr-pad" 
						id="instrument-canvases-select" 
						onchange="SelectDropDown('instrument-canvases',this.value)">
				</select> 
				<!-- Button for deleting current instrument -->
				<button class="lr-pad" onclick="DeleteSelectOption('instrument-canvases-select')">
					Delete
				</button>
				<!-- Button for adding an instrument -->
 				<div class="lr-pad">
  					<label>New Instrument:</label>
  					<input type="text submit" 
							id="instrument-name" 
							name="instrument-name" 
							onkeypress="EnterHandler(event,
														'instrument-canvases',
														'instrument',
														document.getElementById('instrument-name').value)">
				</div> 
				<button class="lr-pad" 
						onclick="AddCanvas('instrument-canvases','instrument',document.getElementById('instrument-name').value)">
					Add
				</button>
			</div>
			<!-- Canvases for displaying graph diagrams -->
			<!-- the tabindex value makes the canvas focusable for catching keystrokes -->
			<div id="instrument-canvases"></div>
		</div>
	</div>
  </body>
</html>
